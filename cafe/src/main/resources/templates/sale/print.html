<!-- print.html l√† giao di·ªán in h√≥a ƒë∆°n, hi·ªÉn th·ªã tr∆∞·ªõc khi th·ª±c hi·ªán thanh to√°n.-->
 <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>In h√≥a ƒë∆°n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-white text-black p-6"> 

<div class="max-w-xl mx-auto border p-6 shadow"> <!-- Kh·ªëi ch·ª©a h√≥a ƒë∆°n cƒÉn gi·ªØa, vi·ªÅn, padding v√† ƒë·ªï b√≥ng -->
    <h1 class="text-2xl font-bold text-center mb-4">üßæ H√ìA ƒê∆†N THANH TO√ÅN</h1> <!-- Ti√™u ƒë·ªÅ h√≥a ƒë∆°n -->

    <div class="mb-4">
        <p><b>B√†n s·ªë:</b> <span th:text="${tableId}">---</span></p> <!-- Hi·ªÉn th·ªã s·ªë b√†n -->
        <p><b>Ng√†y:</b> <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy HH:mm')}">---</span></p> <!-- Hi·ªÉn th·ªã ng√†y gi·ªù hi·ªán t·∫°i -->
        <p><b>Nh√¢n vi√™n:</b> <span th:text="${employeeName}">---</span></p> <!-- Hi·ªÉn th·ªã t√™n nh√¢n vi√™n ph·ª•c v·ª• -->
    </div>

    <table class="w-full text-left border-collapse border mb-4"> <!-- B·∫£ng danh s√°ch m√≥n ƒÉn -->
        <thead>
        <tr class="bg-gray-200"> <!-- Header c·ªßa b·∫£ng -->
            <th class="border px-2 py-1">M√≥n</th> <!-- T√™n m√≥n -->
            <th class="border px-2 py-1">SL</th> <!-- S·ªë l∆∞·ª£ng -->
            <th class="border px-2 py-1">ƒê∆°n gi√°</th> <!-- Gi√° ti·ªÅn m·ªói m√≥n -->
            <th class="border px-2 py-1">Th√†nh ti·ªÅn</th> <!-- T·ªïng ti·ªÅn = SL * ƒê∆°n gi√° -->
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${items}"> <!-- L·∫∑p qua danh s√°ch c√°c m√≥n ƒë√£ g·ªçi -->
            <td class="border px-2 py-1" th:text="${item.itemName}">Cafe</td> <!-- T√™n m√≥n -->
            <td class="border px-2 py-1" th:text="${item.quantity}">1</td> <!-- S·ªë l∆∞·ª£ng -->
            <td class="border px-2 py-1" th:text="${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')}">0</td> <!-- Gi√° ƒë∆°n v·ªã -->
            <td class="border px-2 py-1" th:text="${#numbers.formatDecimal(item.quantity * item.price, 0, 'COMMA', 0, 'POINT')}">0</td> <!-- Th√†nh ti·ªÅn -->
        </tr>
        </tbody>
    </table>

    <p class="text-right font-bold">T·ªïng c·ªông:
        <span th:text="${#numbers.formatDecimal(totalAmount, 0, 'COMMA', 0, 'POINT')}">0</span> VND
        <!-- Hi·ªÉn th·ªã t·ªïng ti·ªÅn c·ªßa t·∫•t c·∫£ m√≥n -->
    </p>
</div>

<!-- Khu v·ª±c n√∫t h√†nh ƒë·ªông: In v√† ƒë√≥ng -->
<div class="text-center mt-4 no-print"> <!-- Ch·ªâ hi·ªÉn th·ªã khi kh√¥ng in -->
    <button onclick="window.print()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">üñ® In</button>
    <!-- N√∫t in h√≥a ƒë∆°n -->
    <button onclick="window.close()" class="ml-4 px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-600">‚ùå ƒê√≥ng</button>
    <!-- N√∫t ƒë√≥ng c·ª≠a s·ªï -->
</div>

<!-- Script g·ª≠i t√≠n hi·ªáu v·ªÅ c·ª≠a s·ªï cha sau khi in xong -->
<script>
    window.onafterprint = function () {
        if (window.opener) {
            window.opener.postMessage('printed', '*'); // G·ª≠i th√¥ng b√°o "printed" cho trang cha
        }
    };
</script>
</body>
</html>
