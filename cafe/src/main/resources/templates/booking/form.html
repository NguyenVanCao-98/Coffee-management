<!DOCTYPE html> <!-- Khai bÃ¡o Ä‘Ã¢y lÃ  tÃ i liá»‡u HTML5 -->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}"> <!-- Káº¿ thá»«a layout tá»•ng thá»ƒ -->

<head>
    <meta charset="UTF-8"> <!-- Äáº·t báº£ng mÃ£ kÃ½ tá»± UTF-8 -->
    <title>Äáº·t BÃ n</title> <!-- TiÃªu Ä‘á» hiá»ƒn thá»‹ trÃªn tab trÃ¬nh duyá»‡t -->
    <script src="https://cdn.tailwindcss.com"></script> <!-- NhÃºng Tailwind CSS tá»« CDN -->
</head>

<body class="bg-gray-100 text-gray-800"> <!-- Ná»n xÃ¡m nháº¡t vÃ  chá»¯ mÃ u xÃ¡m Ä‘áº­m -->
<div layout:fragment="content" class="max-w-3xl w-full mx-auto bg-white p-6 mt-10 rounded shadow-md">
    <!-- Ná»™i dung chÃ­nh Ä‘Æ°á»£c chÃ¨n vÃ o layout cha. Giao diá»‡n tháº» tráº¯ng, bo gÃ³c, Ä‘á»• bÃ³ng -->

    <h2 class="text-2xl font-bold text-blue-700 mb-6">ğŸ“… Äáº·t BÃ n</h2> <!-- TiÃªu Ä‘á» trang -->

    <form th:action="@{/booking}" th:object="${booking}" method="post" class="space-y-5">
        <!-- Gá»­i form POST tá»›i /booking. Gáº¯n Ä‘á»‘i tÆ°á»£ng `booking` Ä‘á»ƒ liÃªn káº¿t cÃ¡c field -->

        <input type="hidden" th:field="*{tableId}" /> <!-- ID bÃ n, áº©n -->
        <input type="hidden" th:field="*{employeeId}" /> <!-- ID nhÃ¢n viÃªn Ä‘áº·t bÃ n, áº©n -->

        <!-- Nháº­p tÃªn khÃ¡ch hÃ ng -->
        <div>
            <label class="block font-semibold mb-1">ğŸ‘¤ TÃªn khÃ¡ch hÃ ng:</label>
           <input type="text" th:field="*{customerName}" required minlength="2" maxlength="30"
			       placeholder="Nguyá»…n VÄƒn A"
			       pattern="^[A-Za-zÃ€-á»¹\s]+$"
			       title="Chá»‰ nháº­p chá»¯ vÃ  khoáº£ng tráº¯ng, khÃ´ng nháº­p sá»‘ hay kÃ½ tá»± Ä‘áº·c biá»‡t"
			       class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
            <!-- Hiá»ƒn thá»‹ lá»—i náº¿u cÃ³ -->
            <div th:if="${#fields.hasErrors('customerName')}" th:errors="*{customerName}"
                 class="text-red-600 text-sm mt-1"></div>
        </div>

        <!-- Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i khÃ¡ch -->
        <div>
		    <label class="block font-semibold mb-1">ğŸ“ Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
		  <input type="text" th:field="*{customerPhone}" required maxlength="11"
		       placeholder="0912345678"
		       pattern="0\d{9,10}"
		       title="Chá»‰ nháº­p sá»‘, báº¯t Ä‘áº§u báº±ng 0 vÃ  cÃ³ 10 hoáº·c 11 chá»¯ sá»‘"
		       class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"
		       oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
		    <div th:if="${#fields.hasErrors('customerPhone')}" th:errors="*{customerPhone}"
		         class="text-red-600 text-sm mt-1"></div>
		</div>

        <!-- Chá»n ngÃ y Ä‘áº·t bÃ n -->
	     <div>
		   <input type="date" th:field="*{reservationDate}" required
			       th:attr="min=${today}"
			       th:value="${today}"
			       title="Chá»n ngÃ y tá»« hÃ´m nay trá»Ÿ Ä‘i"
			       class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
		    <div th:if="${#fields.hasErrors('reservationDate')}" th:errors="*{reservationDate}"
		         class="text-red-600 text-sm mt-1"></div>
		</div>

        <!-- Chá»n giá» Ä‘áº·t bÃ n -->
        <div>
            <label class="block font-semibold mb-1">â° Giá» Ä‘áº·t:</label>
            <input type="time" th:field="*{reservationTime}" required
                   class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
            <div th:if="${#fields.hasErrors('reservationTime')}" th:errors="*{reservationTime}"
                 class="text-red-600 text-sm mt-1"></div>
        </div>

        <!-- NÃºt Há»§y vÃ  Äáº·t -->
        <div class="flex justify-end gap-4 pt-4">
            <a href="/sale"
               class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500 transition">âŒ Há»§y</a>
            <input type="submit" value="âœ… Äáº·t bÃ n"
                   class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition" />
        </div>
    </form>
</div>

<!-- Script Ä‘á»ƒ Ä‘áº·t min cho ngÃ y hiá»‡n táº¡i, khÃ´ng cho Ä‘áº·t lÃ¹i -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        document.querySelector("input[type='date']").setAttribute("min", today);
    });
</script>
</body>
</html>
